<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ocr.service">
	<!-- 保存打码日志 -->
	<insert id="OcrDao_saveOcrRequestLog" parameterType="map">
		INSERT
		INTO
		ocr_request_log(codeType,requestId,picId,yzm,reviceTime,recogTime,
		dateLength,company,
		inputTime)
		VALUES(#{codeType},#{requestId},#{picId},#{yzm},#{reviceTime},#{recogTime},
		#{dateLength},#{company},
		now())
	</insert>

	<update id="OcrDao_updateOcrRequestLog" parameterType="map">
		update
		ocr_request_log
		set isRight=#{isRight},updateTime=now()
		where
		picId=#{picId}
	</update>
	<delete id="OcrDao_deleteOcrRequestLog" parameterType="map">
		delete
		from
		ocr_request_log
		where
		picId=#{picId}
	</delete>
	<select id="OcrDao_queryOcrRequestLog" parameterType="map"
		resultType="map">
		select a.* from
		ocr_request_log a
		where picId=#{picId}
	</select>



	<select id="OcrDao_queryOcrSetting" parameterType="map" resultType="map">
		SELECT
		id,codeType,thirdCodeType,thirdCom,remark,inputTime,inputUserCode,updateTime,updateUserCode
		FROM ocr_request_setting
		WHERE codeType=#{codeType}
	</select>

	<insert id="OcrDao_saveOcrSetting" parameterType="map">
		INSERT INTO ocr_request_setting
		(codeType,thirdCodeType,thirdCom,remark,inputTime,inputUserCode,updateTime,updateUserCode)
		VALUES
		(#{codeType},#{thirdCodeType},#{thirdCom},#{remark},#{inputTime},#{inputUserCode},#{updateTime},#{updateUserCode})
	</insert>

	<delete id="OcrDao_deleteOcrSetting" parameterType="map">
		DELETE FROM ocr_request_setting
		WHERE id=#{id}
	</delete>

	<update id="OcrDao_updateOcrSetting" parameterType="map">
		UPDATE ocr_request_setting
		SET
		codeType=#{codeType},thirdCodeType=#{thirdCodeType},thirdCom=#{thirdCom},remark=#{remark},
		inputTime=#{inputTime},inputUserCode=#{inputUserCode},updateTime=#{updateTime},
		updateUserCode=#{updateUserCode}
		WHERE id=#{id}
	</update>

	<select id="OcrDao_queryOcrPic" parameterType="map" resultType="map">
		SELECT * FROM ocr_request_log a JOIN ocr_request_setting b ON
		a.codeType = b.codeType WHERE a.picId = #{picId}
	</select>
</mapper>